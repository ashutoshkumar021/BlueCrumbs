<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Properties in Dholera | BlueCrumbs Real Estate</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../images/bgremovelogo.png" />
    <link rel="shortcut icon" type="image/png" href="../images/bgremovelogo.png" />
    <link rel="apple-touch-icon" href="../images/bgremovelogo.png" />
  <meta name="description" content="Find the best properties in Dholera. Premium residential and commercial projects with modern amenities.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/location-responsive.css">
  
  <style>
    body { padding-top: 70px; }
    
    .location-hero {
      background: linear-gradient(135deg, #0d2c54 0%, #1a4d8f 100%);
      padding: 60px 0 40px;
      text-align: center;
      color: #fff;
    }
    .location-hero h1 {
      font-size: 2.8rem;
      font-weight: 700;
      margin-bottom: 10px;
    }
    .location-hero p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    .breadcrumb-nav {
      background: #f8f9fb;
      padding: 15px 0;
      border-bottom: 1px solid #e5e7eb;
    }
    .breadcrumb {
      margin: 0;
      background: transparent;
    }
    .stats-section {
      padding: 50px 0;
      background: #fff;
    }
    .stat-box {
      text-align: center;
      padding: 30px;
      background: linear-gradient(135deg, #fff 0%, #fef9e7 100%);
      border-radius: 12px;
      border: 2px solid #f7b801;
      margin-bottom: 30px;
      transition: transform 0.3s;
    }
    .stat-box:hover {
      transform: translateY(-5px);
    }
    .stat-box h3 {
      color: #f7b801;
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
    }
    .stat-box p {
      color: #0d2c54;
      font-weight: 500;
    }
    .properties-section {
      padding: 60px 0;
      background: #f8f9fb;
    }
    .property-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      margin-bottom: 30px;
      transition: transform 0.3s;
    }
    .property-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    .property-image {
      height: 250px;
      background-size: cover;
      background-position: center;
      position: relative;
      overflow: hidden;
    }
    .property-image-slider {
      height: 250px;
      position: relative;
      overflow: hidden;
    }
    .property-image-slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }
    .property-image-slide.active {
      opacity: 1;
    }
    .property-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #f7b801;
      color: #0d2c54;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .property-content {
      padding: 20px;
    }
    .property-content h3 {
      color: #0d2c54;
      font-size: 1.4rem;
      margin-bottom: 10px;
    }
    .property-location {
      color: #6b7280;
      margin-bottom: 15px;
    }
    .property-location i {
      color: #f7b801;
      margin-right: 5px;
    }
    .property-price {
      font-size: 1.3rem;
      color: #0d2c54;
      font-weight: 700;
      margin-bottom: 15px;
    }
    .property-features {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .feature-item {
      display: flex;
      align-items: center;
      gap: 5px;
      color: #6b7280;
      font-size: 0.9rem;
    }
    .view-btn {
      background: linear-gradient(135deg, #f7b801 0%, #e0a600 100%);
      color: #0d2c54;
      padding: 10px 25px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      width: 100%;
      transition: all 0.3s;
    }
    .view-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(247, 184, 1, 0.3);
    }
    .about-location {
      padding: 60px 0;
      background: #fff;
    }
    .about-content h2 {
      color: #0d2c54;
      font-size: 2.2rem;
      margin-bottom: 20px;
    }
    .about-content p {
      color: #6b7280;
      line-height: 1.8;
      margin-bottom: 20px;
    }
    .highlights {
      margin-top: 30px;
    }
    .highlight-item {
      display: flex;
      align-items: start;
      gap: 15px;
      margin-bottom: 20px;
    }
    .highlight-item i {
      color: #f7b801;
      font-size: 1.5rem;
      margin-top: 5px;
    }
    .highlight-content h4 {
      color: #0d2c54;
      margin-bottom: 5px;
    }
    .highlight-content p {
      color: #6b7280;
      margin: 0;
    }
  </style>
</head>
<body>
  <div id="header-placeholder"></div>
  
  <!-- Location Hero -->
  <section class="location-hero">
    <div class="container">
      <h1>Properties in Dholera</h1>
      <p>Discover premium residential and commercial projects</p>
    </div>
  </section>
  
  <!-- Breadcrumb -->
  <section class="breadcrumb-nav">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/index.html">Home</a></li>
          <li class="breadcrumb-item"><a href="/projects.html">Projects</a></li>
          <li class="breadcrumb-item active">Dholera</li>
        </ol>
      </nav>
    </div>
  </section>
  
  <!-- Stats Section -->
  <section class="stats-section">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-6">
          <div class="stat-box">
            <h3>100+</h3>
            <p>Active Projects</p>
          </div>
        </div>
        <div class="col-md-3 col-6">
          <div class="stat-box">
            <h3>15+</h3>
            <p>Trusted Builders</p>
          </div>
        </div>
        <div class="col-md-3 col-6">
          <div class="stat-box">
            <h3>20L-60L</h3>
            <p>Avg. Price Range</p>
          </div>
        </div>
        <div class="col-md-3 col-6">
          <div class="stat-box">
            <h3>20%</h3>
            <p>Ready to Move</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- About Location -->
  <section class="about-location">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="about-content">
            <h2>Why Invest in Dholera?</h2>
            <p>Dholera SIR is an upcoming smart city with world-class infrastructure. Strategic location between Ahmedabad and Bhavnagar makes it a future growth corridor.</p>
            <p>With excellent connectivity, world-class infrastructure, and a thriving business ecosystem, Dholera offers the perfect blend of modern living and investment opportunities.</p>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="highlights">
            <div class="highlight-item">
              <i class="fas fa-train"></i>
              <div class="highlight-content">
                <h4>Metro Connectivity</h4>
                <p>Well-connected through metro and expressways</p>
              </div>
            </div>
            <div class="highlight-item">
              <i class="fas fa-building"></i>
              <div class="highlight-content">
                <h4>IT Hub</h4>
                <p>Major IT companies and business parks</p>
              </div>
            </div>
            <div class="highlight-item">
              <i class="fas fa-graduation-cap"></i>
              <div class="highlight-content">
                <h4>Education</h4>
                <p>Top schools and universities nearby</p>
              </div>
            </div>
            <div class="highlight-item">
              <i class="fas fa-hospital"></i>
              <div class="highlight-content">
                <h4>Healthcare</h4>
                <p>World-class hospitals and medical facilities</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Properties Section -->
  <section class="properties-section">
    <div class="container">
      <h2 class="text-center mb-5" style="color: #0d2c54; font-size: 2.5rem;">Featured Properties in Dholera</h2>
      
      <div class="row" id="properties-container">
        <!-- Properties will be loaded dynamically from database -->
      </div>
      
      <div class="text-center mt-5">
        <a href="/projects.html" class="btn btn-primary" style="padding: 12px 40px; font-size: 1.1rem;">
          <i class="fas fa-building"></i> View All Properties
        </a>
      </div>
    </div>
  </section>

  <!-- Location Inquiry Form Section -->
  <section class="location-inquiry-section py-5" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="inquiry-form-wrapper" style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <h2 class="text-center mb-4" style="color: #0d2c54;">Interested in Properties in Dhulera?</h2>
            <p class="text-center text-muted mb-4">Fill out the form below and our property experts will contact you with the best options</p>
            
            <form id="location-inquiry-form">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Full Name *</label>
                  <input type="text" name="name" class="form-control" required placeholder="Enter your name">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Email Address *</label>
                  <input type="email" name="email" class="form-control" required placeholder="Enter your email">
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Phone Number *</label>
                  <input type="tel" name="phone" class="form-control" required placeholder="Enter 10-digit mobile number" maxlength="10">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Property Type</label>
                  <select name="property_type" class="form-control">
                    <option value="">Select Property Type</option>
                    <option value="Residential">Residential</option>
                    <option value="Commercial">Commercial</option>
                    <option value="Plots">Plots</option>
                    <option value="Villas">Villas</option>
                  </select>
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Budget Range</label>
                  <select name="budget" class="form-control">
                    <option value="">Select Budget</option>
                    <option value="Below 50 Lac">Below 50 Lac</option>
                    <option value="50 Lac - 1 Cr">50 Lac - 1 Cr</option>
                    <option value="1 Cr - 2 Cr">1 Cr - 2 Cr</option>
                    <option value="2 Cr - 5 Cr">2 Cr - 5 Cr</option>
                    <option value="Above 5 Cr">Above 5 Cr</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Preferred Sector/Area</label>
                  <input type="text" name="preferred_area" class="form-control" placeholder="e.g., Near Airport, Industrial Area">
                </div>
              </div>
              
              <div class="mb-3">
                <label class="form-label">Message (Optional)</label>
                <textarea name="message" class="form-control" rows="3" placeholder="Tell us about your specific requirements..."></textarea>
              </div>
              
              <input type="hidden" name="location_name" value="Dhulera">
              
              <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg px-5">
                  <i class="fas fa-paper-plane"></i> Submit Inquiry
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <div id="footer-placeholder"></div>
  
  <button id="floating-enquiry-btn" class="floating-btn" aria-label="Quick enquiry">
    <i class="fas fa-phone-alt"></i>
  </button>
  
  <div id="quick-enquiry-popup" class="enquiry-popup" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="popup-content">
      <button id="close-popup-btn" class="close-popup" aria-label="Close popup">&times;</button>
      <h3>Need Help?<br/>Get a quick call back.</h3>
      <form id="popup-inquiry-form" aria-label="Quick enquiry form">
        <div class="form-group">
          <input type="text" name="name" placeholder="Enter Name" required pattern="[A-Za-z ]{2,50}" />
        </div>
        <div class="form-group">
          <input type="email" name="email" placeholder="Enter Email" required />
        </div>
        <div class="form-group">
          <input type="tel" name="phone" placeholder="Enter Phone" required pattern="[6-9][0-9]{9}" maxlength="10" />
        </div>
        <input type="hidden" name="source" value="Location Page - Dholera" />
        <button type="submit" class="btn btn-primary w-100">Request Call Back</button>
      </form>
    </div>
  </div>
  
  <div id="toaster" role="status" aria-live="polite"></div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/form-handler.js"></script>
  <script src="../js/main.js"></script>
  
  <script>
    $(document).ready(function() {
      // Load header & footer
      $('#header-placeholder').load('../templates/header.html', function() {
        // Initialize sidebar after header is loaded
        if (typeof initializeSidebar === 'function') {
          initializeSidebar();
        }
      });
      $('#footer-placeholder').load('../templates/footer.html');
      
      // Load properties from database
      loadProperties('Dholera');
      
      function loadProperties(location) {
        $.ajax({
          url: `/api/properties/location/${location}`,
          method: 'GET',
          success: function(properties) {
            displayProperties(properties);
          },
          error: function() {
            $('#properties-container').html('<div class="col-12 text-center"><p>No properties found in this location.</p></div>');
          }
        });
      }
      
      function displayProperties(properties) {
        const container = $('#properties-container');
        container.empty();
        
        if (properties.length === 0) {
          container.html('<div class="col-12 text-center"><p>No properties found in this location.</p></div>');
          return;
        }
        
        properties.forEach(function(property) {
          const photos = Array.isArray(property.photos) && property.photos.length ? property.photos.slice(0, 3) : ['images/property-1.jpg'];
          const badge = property.status_possession || property.project_type || '';
          const bhk = property.bhk || '';
          const size = property.size_sqft || '';
          const price = property.min_price && property.max_price ? (property.min_price + ' - ' + property.max_price) : (property.min_price || property.max_price || '');
          
          const imageSlides = photos.map(function(url, index) {
            return '<div class="property-image-slide' + (index === 0 ? ' active' : '') + '" style="background-image: url(\'' + url + '\')"></div>';
          }).join('');
          
          const propertyCard = `
            <div class="col-lg-4 col-md-6">
              <div class="property-card">
                <div class="property-image-slider">
                  ${imageSlides}
                  <span class="property-badge">${badge}</span>
                </div>
                <div class="property-content">
                  <h3>${property.project_name || 'Property'}</h3>
                  <div class="property-location">
                    <i class="fas fa-map-marker-alt"></i> ${property.location || ''}
                  </div>
                  <div class="property-features">
                    <div class="feature-item">
                      <i class="fas fa-bed"></i> ${bhk}
                    </div>
                    <div class="feature-item">
                      <i class="fas fa-expand"></i> ${size}
                    </div>
                  </div>
                  <div class="property-price">${price}</div>
                  <button class="view-btn" onclick="window.location.href='/projects.html'">View Details</button>
                </div>
              </div>
            </div>
          `;
          
          container.append(propertyCard);
        });
        
        // Initialize auto-scroll for property images
        initPropertyImageSlider();
      }
      
      function initPropertyImageSlider() {
        $('.property-image-slider').each(function() {
          const $slider = $(this);
          const $slides = $slider.find('.property-image-slide');
          
          if ($slides.length > 1) {
            let currentSlide = 0;
            
            setInterval(function() {
              $slides.removeClass('active');
              currentSlide = (currentSlide + 1) % $slides.length;
              $slides.eq(currentSlide).addClass('active');
            }, 3000);
          }
        });
      }
      
      // Handle location inquiry form submission
      $('#location-inquiry-form').on('submit', function(e) {
        e.preventDefault();
        
        const formData = {
          name: $(this).find('input[name="name"]').val().trim(),
          email: $(this).find('input[name="email"]').val().trim(),
          phone: $(this).find('input[name="phone"]').val().trim(),
          location_name: $(this).find('input[name="location_name"]').val(),
          property_type: $(this).find('select[name="property_type"]').val(),
          budget: $(this).find('select[name="budget"]').val(),
          preferred_area: $(this).find('input[name="preferred_area"]').val().trim(),
          message: $(this).find('textarea[name="message"]').val().trim()
        };
        
        // Validation
        if (!formData.name || formData.name.length < 2) {
          window.FormHandler.showToast('Please enter a valid name (minimum 2 characters)', true);
          return;
        }
        
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(formData.email)) {
          window.FormHandler.showToast('Please enter a valid email address', true);
          return;
        }
        
        const phoneRegex = /^[6-9][0-9]{9}$/;
        if (!phoneRegex.test(formData.phone)) {
          window.FormHandler.showToast('Please enter a valid 10-digit mobile number', true);
          return;
        }
        
        const $btn = $(this).find('button[type="submit"]');
        const originalText = $btn.html();
        $btn.prop('disabled', true).html('<i class="fas fa-spinner fa-spin"></i> Submitting...');
        
        $.ajax({
          url: '/api/location-inquiry',
          type: 'POST',
          data: JSON.stringify(formData),
          contentType: 'application/json',
          success: function(response) {
            window.FormHandler.showToast('Thank you for your interest! Our team will contact you soon.');
            $('#location-inquiry-form')[0].reset();
            $('html, body').animate({ scrollTop: 0 }, 500);
          },
          error: function(xhr, status, error) {
            if (xhr.status === 409) {
              window.FormHandler.showToast('You have already submitted an inquiry. We will contact you soon.', true);
            } else {
              window.FormHandler.showToast('There was an error submitting your inquiry. Please try again.', true);
            }
          },
          complete: function() {
            $btn.prop('disabled', false).html(originalText);
          }
        });
      });
    });
  </script>
</body>
</html>
